<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>åŠŸèƒ½æµ‹è¯• - ä¹è´¨äº‘æµ‹</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&family=Noto+Sans+SC:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            serif: ['"Noto Serif SC"', 'Songti SC', 'serif'],
            sans: ['"Noto Sans SC"', 'PingFang SC', 'sans-serif'],
          },
          colors: {
            paper: '#f5f2eb',
            mist: '#e8eae6',
            ink: '#2c3e50',
            indigo: '#4a5568',
            ochre: '#a67c52',
            warm: '#c4a77d',
          },
        },
      },
    };
  </script>
  <style>
    body { 
      font-family: 'Noto Sans SC', sans-serif; 
      background: linear-gradient(135deg, #f5f2eb 0%, #e8eae6 100%);
      color: #2c3e50; 
      min-height: 100vh;
      padding: 2rem;
    }
    .font-serif { font-family: 'Noto Serif SC', serif; }
    .card {
      background: rgba(245, 242, 235, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
      padding: 2rem;
      margin-bottom: 1.5rem;
      border: 1px solid rgba(120, 113, 108, 0.2);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }
    .btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      border-radius: 0.75rem;
      font-weight: 500;
      transition: all 0.3s ease;
      text-decoration: none;
      margin: 0.5rem;
    }
    .btn-primary {
      background: #a67c52;
      color: white;
    }
    .btn-primary:hover {
      background: #8b6a45;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(166, 124, 82, 0.3);
    }
    .btn-secondary {
      background: rgba(166, 124, 82, 0.15);
      color: #a67c52;
    }
    .btn-secondary:hover {
      background: rgba(166, 124, 82, 0.25);
    }
    .status-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
    }
    .status-success {
      background: rgba(34, 197, 94, 0.15);
      color: rgb(22, 163, 74);
    }
    .status-warning {
      background: rgba(251, 191, 36, 0.15);
      color: rgb(217, 119, 6);
    }
  </style>
</head>
<body>
  <div class="max-w-4xl mx-auto">
    <!-- æ ‡é¢˜ -->
    <div class="text-center mb-8">
      <div class="inline-flex items-center gap-2 mb-4">
        <span class="w-12 h-12 rounded-full bg-indigo/10 flex items-center justify-center text-indigo font-serif text-xl">æµ‹</span>
        <span class="font-serif font-semibold text-2xl">ä¹è´¨äº‘æµ‹</span>
      </div>
      <h1 class="font-serif text-3xl mb-2">ç”¨æˆ·æ³¨å†Œç³»ç»Ÿæµ‹è¯•</h1>
      <p class="text-indigo/80">å¿«é€Ÿæµ‹è¯•æ‰€æœ‰åŠŸèƒ½</p>
    </div>

    <!-- å½“å‰çŠ¶æ€ -->
    <div class="card">
      <h2 class="font-serif text-xl mb-4">å½“å‰ç™»å½•çŠ¶æ€</h2>
      <div id="loginStatus">
        <span class="status-badge status-warning">æœªç™»å½•</span>
      </div>
      <div id="userInfo" class="mt-4 hidden">
        <p class="text-sm text-indigo/80 mb-2">ç”¨æˆ·åï¼š<span id="currentUsername" class="font-medium text-ink"></span></p>
        <button onclick="logout()" class="btn btn-secondary mt-2">é€€å‡ºç™»å½•</button>
      </div>
    </div>

    <!-- åŠŸèƒ½å¯¼èˆª -->
    <div class="card">
      <h2 class="font-serif text-xl mb-4">åŠŸèƒ½æµ‹è¯•</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="p-4 bg-white/50 rounded-lg">
          <h3 class="font-medium text-ink mb-2">ğŸ“ ç”¨æˆ·æ³¨å†Œ</h3>
          <p class="text-sm text-indigo/70 mb-3">åˆ›å»ºæ–°è´¦å·ï¼Œä½“éªŒå®Œæ•´æ³¨å†Œæµç¨‹</p>
          <a href="register.html" class="btn btn-primary">å‰å¾€æ³¨å†Œ</a>
        </div>
        <div class="p-4 bg-white/50 rounded-lg">
          <h3 class="font-medium text-ink mb-2">ğŸ” ç”¨æˆ·ç™»å½•</h3>
          <p class="text-sm text-indigo/70 mb-3">ä½¿ç”¨å·²æ³¨å†Œè´¦å·ç™»å½•ç³»ç»Ÿ</p>
          <a href="login.html" class="btn btn-primary">å‰å¾€ç™»å½•</a>
        </div>
        <div class="p-4 bg-white/50 rounded-lg">
          <h3 class="font-medium text-ink mb-2">ğŸ‘¤ ä¸ªäººæ¡£æ¡ˆ</h3>
          <p class="text-sm text-indigo/70 mb-3">æŸ¥çœ‹ä¸ªäººä¿¡æ¯å’Œæµ‹è¯•è®°å½•</p>
          <a href="profile.html" class="btn btn-primary">æŸ¥çœ‹æ¡£æ¡ˆ</a>
        </div>
        <div class="p-4 bg-white/50 rounded-lg">
          <h3 class="font-medium text-ink mb-2">ğŸ  è¿”å›é¦–é¡µ</h3>
          <p class="text-sm text-indigo/70 mb-3">ä½“éªŒå®Œæ•´çš„ä½“è´¨æµ‹è¯•æµç¨‹</p>
          <a href="index.html" class="btn btn-primary">è¿”å›é¦–é¡µ</a>
        </div>
      </div>
    </div>

    <!-- æ•°æ®ç®¡ç† -->
    <div class="card">
      <h2 class="font-serif text-xl mb-4">æ•°æ®ç®¡ç†</h2>
      <div class="mb-4">
        <p class="text-sm text-indigo/80 mb-2">å·²æ³¨å†Œç”¨æˆ·æ•°ï¼š<span id="userCount" class="font-medium text-ink">0</span></p>
        <button onclick="viewAllUsers()" class="btn btn-secondary">æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·</button>
        <button onclick="clearAllData()" class="btn btn-secondary">æ¸…é™¤æ‰€æœ‰æ•°æ®</button>
      </div>
      <div id="userList" class="hidden mt-4 p-4 bg-white/50 rounded-lg max-h-64 overflow-y-auto">
        <h3 class="font-medium text-ink mb-2">ç”¨æˆ·åˆ—è¡¨</h3>
        <div id="userListContent"></div>
      </div>
    </div>

    <!-- æµ‹è¯•æŒ‡å— -->
    <div class="card">
      <h2 class="font-serif text-xl mb-4">æµ‹è¯•æŒ‡å—</h2>
      <ol class="space-y-3 text-sm text-indigo/80">
        <li class="flex gap-3">
          <span class="flex-shrink-0 w-6 h-6 rounded-full bg-ochre/15 text-ochre flex items-center justify-center text-xs">1</span>
          <span>ç‚¹å‡»"å‰å¾€æ³¨å†Œ"ï¼Œå¡«å†™æ³¨å†Œä¿¡æ¯åˆ›å»ºæ–°è´¦å·</span>
        </li>
        <li class="flex gap-3">
          <span class="flex-shrink-0 w-6 h-6 rounded-full bg-ochre/15 text-ochre flex items-center justify-center text-xs">2</span>
          <span>æ³¨å†ŒæˆåŠŸåï¼Œä½¿ç”¨æ–°è´¦å·ç™»å½•ç³»ç»Ÿ</span>
        </li>
        <li class="flex gap-3">
          <span class="flex-shrink-0 w-6 h-6 rounded-full bg-ochre/15 text-ochre flex items-center justify-center text-xs">3</span>
          <span>ç™»å½•åæŸ¥çœ‹ä¸ªäººæ¡£æ¡ˆï¼Œç¡®è®¤ä¿¡æ¯æ­£ç¡®</span>
        </li>
        <li class="flex gap-3">
          <span class="flex-shrink-0 w-6 h-6 rounded-full bg-ochre/15 text-ochre flex items-center justify-center text-xs">4</span>
          <span>è¿”å›é¦–é¡µï¼Œä½“éªŒå®Œæ•´çš„ä½“è´¨æµ‹è¯•æµç¨‹</span>
        </li>
        <li class="flex gap-3">
          <span class="flex-shrink-0 w-6 h-6 rounded-full bg-ochre/15 text-ochre flex items-center justify-center text-xs">5</span>
          <span>æµ‹è¯•å®Œæˆåï¼Œåœ¨ä¸ªäººæ¡£æ¡ˆä¸­æŸ¥çœ‹æµ‹è¯•è®°å½•</span>
        </li>
      </ol>
    </div>

    <!-- åŠŸèƒ½ç‰¹æ€§ -->
    <div class="card">
      <h2 class="font-serif text-xl mb-4">å·²å®ç°åŠŸèƒ½</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
        <div class="flex items-center gap-2">
          <span class="text-green-600">âœ“</span>
          <span>ç”¨æˆ·æ³¨å†Œï¼ˆç”¨æˆ·åã€å¯†ç ï¼‰</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-green-600">âœ“</span>
          <span>å®æ—¶è¡¨å•éªŒè¯</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-green-600">âœ“</span>
          <span>é‡å¤æ³¨å†Œæ£€æµ‹</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-green-600">âœ“</span>
          <span>ç”¨æˆ·ç™»å½•éªŒè¯</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-green-600">âœ“</span>
          <span>ç™»å½•çŠ¶æ€ä¿æŒ</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-green-600">âœ“</span>
          <span>ä¸ªäººæ¡£æ¡ˆå±•ç¤º</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-green-600">âœ“</span>
          <span>æµ‹è¯•è®°å½•ç®¡ç†</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-green-600">âœ“</span>
          <span>ç”¨æˆ·é€€å‡ºç™»å½•</span>
        </div>
      </div>
    </div>
  </div>

  <script src="auth.js"></script>
  <script>
    // æ›´æ–°ç™»å½•çŠ¶æ€
    function updateLoginStatus() {
      const currentUser = window.JiuzhiAuth.getCurrentUser();
      const loginStatus = document.getElementById('loginStatus');
      const userInfo = document.getElementById('userInfo');
      
      if (currentUser) {
        loginStatus.innerHTML = '<span class="status-badge status-success">å·²ç™»å½•</span>';
        userInfo.classList.remove('hidden');
        document.getElementById('currentUsername').textContent = currentUser.username;
      } else {
        loginStatus.innerHTML = '<span class="status-badge status-warning">æœªç™»å½•</span>';
        userInfo.classList.add('hidden');
      }
      
      // æ›´æ–°ç”¨æˆ·æ•°é‡
      const users = JSON.parse(localStorage.getItem('jiuzhi_users') || '[]');
      document.getElementById('userCount').textContent = users.length;
    }

    // é€€å‡ºç™»å½•
    function logout() {
      if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
        window.JiuzhiAuth.logout();
        updateLoginStatus();
        alert('å·²é€€å‡ºç™»å½•');
      }
    }

    // æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
    function viewAllUsers() {
      const users = JSON.parse(localStorage.getItem('jiuzhi_users') || '[]');
      const userList = document.getElementById('userList');
      const userListContent = document.getElementById('userListContent');
      
      if (users.length === 0) {
        alert('æš‚æ— æ³¨å†Œç”¨æˆ·');
        return;
      }
      
      const html = users.map((user, index) => `
        <div class="p-3 mb-2 bg-white rounded border border-stone-200">
          <p class="font-medium text-ink">${index + 1}. ${user.username}</p>
          <p class="text-xs text-indigo/70">ç”¨æˆ·IDï¼š${user.id}</p>
          <p class="text-xs text-indigo/70">æ³¨å†Œæ—¶é—´ï¼š${new Date(user.createdAt).toLocaleString('zh-CN')}</p>
        </div>
      `).join('');
      
      userListContent.innerHTML = html;
      userList.classList.remove('hidden');
    }

    // æ¸…é™¤æ‰€æœ‰æ•°æ®
    function clearAllData() {
      if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰ç”¨æˆ·æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
        localStorage.removeItem('jiuzhi_users');
        localStorage.removeItem('jiuzhi_current_user');
        localStorage.removeItem('jiuzhi_remember');
        updateLoginStatus();
        document.getElementById('userList').classList.add('hidden');
        alert('æ‰€æœ‰æ•°æ®å·²æ¸…é™¤');
      }
    }

    // é¡µé¢åŠ è½½æ—¶æ›´æ–°çŠ¶æ€
    updateLoginStatus();
  </script>
</body>
</html>

